(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vue-flowy"]=e():t["vue-flowy"]=e()})(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="+xUi")}({"+xUi":function(t,e,n){"use strict";n.r(e);n("HrLf");var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flowyChart",attrs:{id:t._uid}})},s=[];const o="\0",i="\0",c="";function h(t,e,n,r){if(!t&&e>n){const t=e;e=n,n=t}return e+c+n+c+(r||i)}class u{constructor(t){this.directed=t.directed||!0,this.multiGraph=t.multiGraph||!1,this.compound=t.compound||!1,this._nodes={},!0===this.compound&&(this.parent={},this.children={},this.children[o]={}),this.in={},this.preds={},this.out={},this.sucs={},this.edgeObjs={},this.edgeLabels={}}setGraph(t){this.label=t}setNode(t,e){return this._nodes[t]?(e&&(this._nodes[t]=e),this):(this._nodes[t]=e||null,!0===this.compound&&(this.parent[t]=o,this.children[t]={},this.children[o][t]=!0),this.in[t]={},this.preds[t]={},this.out[t]={},this.sucs[t]={},this.nodeCount++,this)}setEdge(t,e,n){this.setNode(t),this.setNode(e);const r=h(this.directed,t,e,name);if(this.edgeLabels[r])return n&&(this.edgeLabels[r]=n),this;this.out[t],this.in[e],this.edgeCount++}getNode(t){return this._nodes[t]}get nodes(){return Object.values(this._nodes)}}function a(t,e){const n=t.x,r=t.y,s=e.x-n,o=e.y-r;let i,c,h=t.width/2,u=t.height/2;return Math.abs(o)*h>Math.abs(s)*u?(o<0&&(u=-u),i=0===o?0:u*s/o,c=u):(s<0&&(h=-h),i=h,c=0===s?0:h*o/s),{x:n+i,y:r+c}}var d=a;function l(t,e,n,r){const s=t.x,o=t.y,i=s-r.x,c=o-r.y,h=Math.sqrt(e*e*c*c+n*n*i*i);let u=Math.abs(e*n*i/h);r.x<s&&(u=-u);let a=Math.abs(e*n*c/h);return r.y<o&&(a=-a),{x:s+u,y:o+a}}var f=l;function p(t,e,n){return f(t,e,e,n)}var y=p;function g(t,e,n,r){const s=e.y-t.y,o=t.x-e.x,i=e.x*t.y-t.x*e.y,c=s*n.x+o*n.y+i,h=s*r.x+o*r.y+i;if(0!==c&&0!==h&&x(c,h))return;const u=r.y-n.y,a=n.x-r.x,d=r.x*n.y-n.x*r.y,l=u*t.x+a*t.y+d,f=u*e.x+a*e.y+d;if(0!==l&&0!==f&&x(l,f))return;const p=s*a-u*o;if(0===p)return;const y=Math.abs(p/2);let g=o*d-a*i;const m=g<0?(g-y)/p:(g+y)/p;g=u*i-s*d;const w=g<0?(g-y)/p:(g+y)/p;return{x:m,y:w}}function x(t,e){return t*e>0}var m=g;function w(t,e,n){const r=t.x,s=t.y,o=[];let i=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY;e.forEach(function(t){i=Math.min(i,t.x),c=Math.min(c,t.y)});const h=r-t.width/2-i,u=s-t.height/2-c;for(let a=0;a<e.length;a+=1){const r=e[a],s=e[a<e.length-1?a+1:0],i=m(t,n,{x:h+r.x,y:u+r.y},{x:h+s.x,y:u+s.y});i&&o.push(i)}return o.length?(o.length>1&&o.sort(function(t,e){const r=t.x-n.x,s=t.y-n.y,o=Math.sqrt(r*r+s*s),i=e.x-n.x,c=e.y-n.y,h=Math.sqrt(i*i+c*c);return o<h?-1:o===h?0:1}),o[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}var b=w;function _(t,e,n){const r=t.insert("rect",":first-child").attr("rx",n.rx).attr("ry",n.ry).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return n.intersect=function(t){return d(n,t)},r}function v(t,e,n){const r=e.width/2,s=e.height/2,o=t.insert("ellipse",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("rx",r).attr("ry",s);return n.intersect=function(t){return f(n,r,s,t)},o}function E(t,e,n){const r=Math.max(e.width,e.height)/2,s=t.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",r);return n.intersect=function(t){return y(n,r,t)},s}function N(t,e,n){const r=e.width*Math.SQRT2/2,s=e.height*Math.SQRT2/2,o=[{x:0,y:-s},{x:-r,y:0},{x:0,y:s},{x:r,y:0}],i=t.insert("polygon",":first-child").attr("points",o.map(function(t){return t.x+","+t.y}).join(" "));return n.intersect=function(t){return b(n,o,t)},i}var S={rect:_,ellipse:v,circle:E,diamond:N};class C{constructor(){}render(t,e){console.log(t);const n=this.createOrSelectGroup(t,"output");this.createOrSelectGroup(n,"edgePaths"),this.createEdgeLabels(this.createOrSelectGroup(n,"edgeLabels"),e),this.createNodes(this.createOrSelectGroup(n,"nodes"),e)}createNodes(t,e){e.nodes().filter(function(t){return!util.isSubgraph(e,t)});t.selectAll("g.node");for(const n of nodes){S[n.shape]}}createOrSelectGroup(t,e){let n=t.querySelector("g."+e);return n||(n=document.createElementNS("http://www.w3.org/2000/svg","g"),n.classList.add(e),t.appendChild(n)),n}}class O{constructor(t,e){this.id=t,this.options=e,this.edges=[]}leadsTo(t,e){return this.edges.push({otherId:t.id,options:e}),t}}class I{constructor(t){this.elements=[]}addElement(t,e){const n=new O(t,e);return this.elements.push(n),n}render(t){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("id","f"+t.id),t.appendChild(e);const n=document.createElementNS("http://www.w3.org/2000/svg","g");e.appendChild(n);const r=new u({multiGraph:!0,compound:!0});r.setGraph({rankdir:"LR",marginx:20,marginy:20});for(const h in this.elements){const t=this.elements[h],e={};e.label=t.id,t.options&&t.options.label&&(e.label=t.options.label),r.setNode(t.id,e)}for(const h of r.nodes)h.rx=h.ry=5;for(const h in this.elements){const t=this.elements[h];for(const e in t.edges){const n=t.edges[e],s={};n.options&&n.options.label&&(s.label=n.options.label),r.setEdge(t.id,n.otherId,s)}}const s=new C,o=e.querySelector("g");s.render(o,r);const i=document.getElementById("f"+t.id),c=i.querySelector("g");i.style.width=c.getBoundingClientRect().width+40,i.style.height=c.getBoundingClientRect().height+40}}var M={name:"VueFlowy",props:{chart:{type:I,required:!0}},data(){return{chartElement:null}},watch:{"chart.elements":function(t,e){this.chart.render(this.chartElement)}},mounted(){this.chartElement=document.getElementById(this._uid)}},T=M;n("E1aB");function R(t,e,n,r,s,o,i,c){var h,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),i?(h=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=h):s&&(h=c?function(){s.call(this,this.$root.$options.shadowRoot)}:s),h)if(u.functional){u._injectStyles=h;var a=u.render;u.render=function(t,e){return h.call(e),a(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,h):[h]}return{exports:t,options:u}}var j=R(T,r,s,!1,null,null,null),G=j.exports;const F={install:t=>{t.component(G.name,G)}};G.install=F.install;var L={VueFlowy:G,FlowChart:I};e["default"]=L},E1aB:function(t,e,n){"use strict";var r=n("yF/8"),s=n.n(r);s.a},HrLf:function(t,e,n){if("undefined"!==typeof window){let t;(t=window.document.currentScript)&&(t=t.src.match(/(.+\/)[^/]+\.js$/))&&(n.p=t[1])}},"yF/8":function(t,e,n){}})["default"]});
//# sourceMappingURL=vue-flowy.umd.min.js.map